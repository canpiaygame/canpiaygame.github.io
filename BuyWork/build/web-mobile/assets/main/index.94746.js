window.__require=function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){return r(e[s][1][t]||t)},p,p.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({BookDetail:[function(t,e,o){"use strict";cc._RF.push(e,"175b8o5WeFCUJTJrPghmHPl","BookDetail");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./DataType"),u=t("./Net"),p=cc._decorator,l=p.ccclass,f=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bookName=null,e.price=null,e.publishingHouse=null,e.isbn=null,e.dec=null,e.pic=null,e.num=null,e.edNum=1,e.uid="",e.root=null,e}return r(e,t),e.prototype.setData=function(t,e){this.bookData=t,this.edNum=1,this.uid=e,this.updateUI()},e.prototype.setRoot=function(t){this.root=t},e.prototype.updateUI=function(){var t=this;this.bookName.string="\u4e66\u540d\uff1a\u300a"+this.bookData.name+"\u300b",this.price.string="\u4ef7\u683c\uff1a\u300a"+this.bookData.unitPrice+"\u300b",this.publishingHouse.string="\u51fa\u7248\u793e\uff1a"+this.bookData.publishingHouse,this.isbn.string="isbn\uff1a"+this.bookData.isbn,this.dec.string="\u7b80\u4ecb\uff1a"+this.bookData.description;var e=c.IMG.getImg(parseInt(this.bookData.cover));cc.loader.loadRes(e,cc.Texture2D,function(e,o){var n=new cc.SpriteFrame;n.setTexture(o),t.pic.spriteFrame=n}),this.num.string=this.edNum.toString()},e.prototype.closeBtn=function(){this.node.active=!1},e.prototype.left=function(){this.edNum-1>=1&&(this.edNum=this.edNum-1),this.updateUI()},e.prototype.right=function(){this.edNum+1<=99&&(this.edNum=this.edNum+1),this.updateUI()},e.prototype.buy=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.root.node.emit(c.EventAct.ShowLoading),[4,u.default.buyBook(this.uid,this.bookData.id,this.edNum)];case 1:return t.sent()?this.root.showTips("\u8d2d\u4e70\u6210\u529f\uff01"):this.root.showTips("\u8d2d\u4e70\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"),this.root.node.emit(c.EventAct.HideLoading),this.closeBtn(),[2]}})})},i([f(cc.Label)],e.prototype,"bookName",void 0),i([f(cc.Label)],e.prototype,"price",void 0),i([f(cc.Label)],e.prototype,"publishingHouse",void 0),i([f(cc.Label)],e.prototype,"isbn",void 0),i([f(cc.Label)],e.prototype,"dec",void 0),i([f(cc.Sprite)],e.prototype,"pic",void 0),i([f(cc.Label)],e.prototype,"num",void 0),i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./DataType":"DataType","./Net":"Net"}],BookItem:[function(t,e,o){"use strict";cc._RF.push(e,"d0a18SsggdPx5t+utx8+aWb","BookItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./DataType"),a=cc._decorator,c=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bookName=null,e.pic=null,e.root=null,e}return r(e,t),e.prototype.setRoot=function(t){this.root=t},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.click,this)},e.prototype.click=function(){this.root&&this.bookData&&this.root.onShowDetial(this.bookData)},e.prototype.setData=function(t){this.bookData=t,this.updateUI()},e.prototype.updateUI=function(){var t=this;this.bookName.string=this.bookData.name;var e=s.IMG.getImg(parseInt(this.bookData.cover));cc.loader.loadRes(e,cc.Texture2D,function(e,o){var n=new cc.SpriteFrame;n.setTexture(o),t.pic.spriteFrame=n})},i([u(cc.Label)],e.prototype,"bookName",void 0),i([u(cc.Sprite)],e.prototype,"pic",void 0),i([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./DataType":"DataType"}],BottomTool:[function(t,e,o){"use strict";cc._RF.push(e,"b8b26yFLmVERJ2Y7gF2m15N","BottomTool");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./DataType"),u=t("./Net"),p=t("./OrderItem"),l=cc._decorator,f=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.orderItem=null,e.orderList=null,e.root=null,e.old=null,e}return r(e,t),e.prototype.setRoot=function(t){this.root=t},e.prototype.openOrderList=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.root?this.root.getPageData().isTourist?[2]:(this.root.node.emit(c.EventAct.ShowLoading),[4,u.default.myList(this.root.getPageData().userInfo.id)]):[2];case 1:return(t=e.sent())?(this.old=t,this.updateUI()):this.root.showTips("\u5386\u53f2\u8ba2\u5355\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\uff01"),this.root.node.emit(c.EventAct.HideLoading),this.orderList.active=!0,[2]}})})},e.prototype.updateUI=function(){for(var t=this.old.data,e=this.content.children.reduce(function(t,e){return t[e.name]=e,t},{}),o=0;o<t.length;o++){var n=t[o],r=e[n.id];r?(r.getComponent(p.default).setData(n),delete e[r.name]):this.createNode(n.id).getComponent(p.default).setData(n)}for(var i in e)e[i].destroy()},e.prototype.createNode=function(t){var e=cc.instantiate(this.orderItem);return e.name=t,this.content.addChild(e),e},e.prototype.closeOrderList=function(){this.orderList.active=!1},i([h(cc.Node)],e.prototype,"content",void 0),i([h(cc.Prefab)],e.prototype,"orderItem",void 0),i([h(cc.Node)],e.prototype,"orderList",void 0),i([f],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./DataType":"DataType","./Net":"Net","./OrderItem":"OrderItem"}],DataType:[function(t,e,o){"use strict";cc._RF.push(e,"2638431TJ1NJ43dPutfIpg2","DataType"),Object.defineProperty(o,"__esModule",{value:!0}),o.IMG=o.URL=o.OrderData=o.OrderListData=o.BookData=o.BookListData=o.EventAct=o.UserListData=o.UserInfo=o.PageData=void 0;o.PageData=function(){this.shopData=null,this.isLogin=!1,this.isTourist=!1};o.UserInfo=function(){this.name="",this.password="",this.admin="",this.id="",this.creationTime="",this.updateTime=""};o.UserListData=function(){this.responseCode=0,this.responseMessage="",this.currentPage=0,this.pageSize=0,this.totalPage=0,this.data=[]},function(t){t.ShowLoading="showLoading",t.HideLoading="hideLoading"}(o.EventAct||(o.EventAct={}));o.BookListData=function(){this.responseCode=0,this.responseMessage="",this.currentPage=0,this.pageSize=0,this.totalPage=0,this.data=[]};o.BookData=function(){this.id="",this.name="",this.publishingHouse="",this.publicationDate="",this.isbn="",this.description="",this.cover="",this.unitPrice=""};o.OrderListData=function(){this.responseCode=0,this.responseMessage="",this.currentPage=0,this.pageSize=0,this.totalPage=0,this.data=[]};o.OrderData=function(){this.id="",this.bookId="",this.userId="",this.userName="",this.bookName="",this.total=0,this.amount=0},o.URL={Login:"v1/auth/login",LogOut:"v1/auth/logout",Register:"/v1/user",Fix:"/v1/user",BookList:"/v1/book/paging",AddBook:"/v1/book",Buy:"/v1/order",HistoryMy:"/v1/order/paging",HistoryAll:"/v1/order/paging",UserList:"/v1/user/paging",test:"http://localhost:8888/",prod:"",get DOMAIN(){return o.URL.test}},o.IMG={IMG:["Img/1","Img/2","Img/3","Img/4","Img/5"],getImg:function(t){return o.IMG.IMG[t]}},cc._RF.pop()},{}],Helloworld:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){this.label.string=this.text,console.log("aa")},i([c(cc.Label)],e.prototype,"label",void 0),i([c],e.prototype,"text",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],HomePage:[function(t,e,o){"use strict";cc._RF.push(e,"fc4d7Y+f21I+KtgcUjfTLOh","HomePage");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BottomTool"),u=t("./DataType"),p=t("./Login"),l=t("./Net"),f=t("./Shop"),h=t("./Tips"),d=t("./ToolBar"),y=cc._decorator,v=y.ccclass,g=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loading=null,e.shopNode=null,e.bottomTool=null,e.topTool=null,e.loginNode=null,e.tips=null,e.pageData=new u.PageData,e}return r(e,t),e.prototype.setUserData=function(t){return s(this,void 0,void 0,function(){var e,o;return a(this,function(n){switch(n.label){case 0:return e=this.getPageData(),t?(e.userInfo=t,e.isLogin=!0,[4,l.default.getBookList()]):[3,2];case 1:return o=n.sent(),e.shopData=o,[3,3];case 2:e.userInfo=null,e.isLogin=!1,e.shopData=null,n.label=3;case 3:return this.updatePageData(e),this.node.emit(u.EventAct.HideLoading),this.topTool.setUserData(t),[2]}})})},e.prototype.touristLogin=function(){return s(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return(t=this.getPageData()).isTourist=!0,t.userInfo=null,t.isLogin=!1,[4,l.default.getBookList()];case 1:return e=o.sent(),t.shopData=e,this.updatePageData(t),[2]}})})},e.prototype.onLoad=function(){this.node.on(u.EventAct.ShowLoading,this.showLoading.bind(this),this),this.node.on(u.EventAct.HideLoading,this.hideLoading.bind(this),this),this.loginNode.setRoot(this),this.shopNode.setRoot(this),this.bottomTool.setRoot(this),this.topTool.setRoot(this)},e.prototype.updatePageData=function(t){this.pageData=t,this.updateUI(this.pageData)},e.prototype.updateUI=function(t){this.loginNode.node.active=!t.isTourist&&!t.isLogin,this.shopNode.node.active=t.isLogin&&null!=t.shopData,t.shopData&&t.shopData!=this.shopNode.shopData&&this.shopNode.setData(t.shopData,t.userInfo.id)},e.prototype.showLoading=function(){this.loading.active=!0},e.prototype.hideLoading=function(){this.loading.active=!1},e.prototype.getPageData=function(){return this.pageData},e.prototype.showTips=function(t){var e=this;this.tips.node.active=!0,this.tips.setLabel(t),this.scheduleOnce(function(){e.tips.node.active=!1},1)},i([g(cc.Node)],e.prototype,"loading",void 0),i([g(f.default)],e.prototype,"shopNode",void 0),i([g(c.default)],e.prototype,"bottomTool",void 0),i([g(d.default)],e.prototype,"topTool",void 0),i([g(p.default)],e.prototype,"loginNode",void 0),i([g(h.default)],e.prototype,"tips",void 0),i([v],e)}(cc.Component);o.default=b,cc._RF.pop()},{"./BottomTool":"BottomTool","./DataType":"DataType","./Login":"Login","./Net":"Net","./Shop":"Shop","./Tips":"Tips","./ToolBar":"ToolBar"}],Login:[function(t,e,o){"use strict";cc._RF.push(e,"c1891fPaAtEMpAtGeIOZwF9","Login");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./DataType"),u=t("./Net"),p=cc._decorator,l=p.ccclass,f=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userName=null,e.psw=null,e.root=null,e.userData=null,e}return r(e,t),e.prototype.setRoot=function(t){this.root=t},e.prototype.onLoad=function(){},e.prototype.loginBtnClick=function(){return s(this,void 0,void 0,function(){var t,e,o;return a(this,function(n){switch(n.label){case 0:return t=this.userName.textLabel.string,e=this.psw.textLabel.string,this.root.node.emit(c.EventAct.ShowLoading),[4,u.default.login(t,e)];case 1:return(o=n.sent()).id?(this.root.setUserData(o),this.userData=o,this.root.showTips("\u767b\u5f55\u6210\u529f\uff01")):(this.root.showTips("\u767b\u5f55\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"),this.root.node.emit(c.EventAct.HideLoading)),[2]}})})},e.prototype.register=function(){return s(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return t=this.userName.textLabel.string,e=this.psw.textLabel.string,t.length<3?(this.root.showTips("\u7528\u6237\u540d\u8bbe\u7f6e\u592a\u77ed\uff01"),[2]):e.length<6?(this.root.showTips("\u5bc6\u7801\u8bbe\u7f6e\u592a\u77ed\uff01"),[2]):(this.root.node.emit(c.EventAct.ShowLoading),[4,u.default.register(t,e,!0)]);case 1:return o.sent()?(this.root.showTips("\u6ce8\u518c\u6210\u529f\uff01\u6b63\u5728\u8df3\u8f6c"),this.loginBtnClick()):(this.root.showTips("\u6ce8\u518c\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"),this.root.node.emit(c.EventAct.HideLoading)),[2]}})})},e.prototype.logOutBtnClick=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.userData?[4,u.default.logout(this.userData.id)]:[2];case 1:return t.sent(),this.root.setUserData(null),this.userData=null,this.root.showTips("\u9000\u51fa\u767b\u5f55\uff01"),[2]}})})},e.prototype.touristLogin=function(){return s(this,void 0,void 0,function(){return a(this,function(){return this.userData&&this.root?(this.root.touristLogin(),this.root.showTips("\u6e38\u5ba2\u767b\u5f55\uff01"),[2]):[2]})})},i([f(cc.EditBox)],e.prototype,"userName",void 0),i([f(cc.EditBox)],e.prototype,"psw",void 0),i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./DataType":"DataType","./Net":"Net"}],Net:[function(t,e,o){"use strict";cc._RF.push(e,"e78d1KGhndD84KNVIzHgMZI","Net");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./DataType"),s=function(){function t(){}return t.login=function(){return n(this,void 0,Promise,function(){var t,e=this;return r(this,function(){return t={},[2,new Promise(function(o,s){return n(e,void 0,void 0,function(){var e,n,a;return r(this,function(r){switch(r.label){case 0:return a=(n=JSON).parse,[4,this.ajax("POST",""+i.URL.DOMAIN+i.URL.Login,JSON.stringify(t),[{name:"Content-Type",value:"application/json"}])];case 1:return(e=a.apply(n,[r.sent()]))&&"Success"==e.responseMessage?(console.log("\u767b\u9646\u6210\u529f"),o(e.data)):s(new Error("\u767b\u9646\u5931\u8d25")),[2]}})})})]})})},t.logout=function(t){return n(this,void 0,Promise,function(){var e,o=this;return r(this,function(){return e={uid:t},[2,new Promise(function(s,a){return n(o,void 0,void 0,function(){var o,n,c;return r(this,function(r){switch(r.label){case 0:return c=(n=JSON).parse,[4,this.ajax("POST",""+i.URL.DOMAIN+i.URL.LogOut,JSON.stringify(e),[{name:"Content-Type",value:"application/json"},{name:"userId",value:t}])];case 1:return(o=c.apply(n,[r.sent()]))&&"Success"==o.responseMessage?(console.log("\u767b\u51fa\u6210\u529f"),s(!0)):a(new Error("\u767b\u51fa\u5931\u8d25")),[2]}})})})]})})},t.getBookList=function(){return n(this,void 0,Promise,function(){var t,e=this;return r(this,function(){return t={currentPage:0,pageSize:9999},[2,new Promise(function(o,s){return n(e,void 0,void 0,function(){var e,n,a;return r(this,function(r){switch(r.label){case 0:return a=(n=JSON).parse,[4,this.ajax("PUT",""+i.URL.DOMAIN+i.URL.BookList,JSON.stringify(t),[{name:"Content-Type",value:"application/json"}])];case 1:return(e=a.apply(n,[r.sent()]))&&"Success"==e.responseMessage?(console.log("\u4e66\u5355"),o(e)):s(new Error("\u4e66\u5355\u5931\u8d25")),[2]}})})})]})})},t.addBook=function(t,e){return n(this,void 0,Promise,function(){var o,s=this;return r(this,function(){return o=t,[2,new Promise(function(t,a){return n(s,void 0,void 0,function(){var n,s,c;return r(this,function(r){switch(r.label){case 0:return c=(s=JSON).parse,[4,this.ajax("POST",""+i.URL.DOMAIN+i.URL.AddBook,JSON.stringify(o),[{name:"Content-Type",value:"application/json"},{name:"userId",value:e}])];case 1:return(n=c.apply(s,[r.sent()]))&&"Success"==n.responseMessage?(console.log("\u6dfb\u52a0\u4e66\u7c4d\u6210\u529f"),t(n)):a(new Error("\u6dfb\u52a0\u5931\u8d25")),[2]}})})})]})})},t.updateBook=function(t,e){return n(this,void 0,Promise,function(){var o,s=this;return r(this,function(){return o=t,[2,new Promise(function(t,a){return n(s,void 0,void 0,function(){var n,s,c;return r(this,function(r){switch(r.label){case 0:return c=(s=JSON).parse,[4,this.ajax("PUT",""+i.URL.DOMAIN+i.URL.AddBook,JSON.stringify(o),[{name:"Content-Type",value:"application/json"},{name:"userId",value:e}])];case 1:return(n=c.apply(s,[r.sent()]))&&"Success"==n.responseMessage?(console.log("\u6dfb\u52a0\u4e66\u7c4d\u6210\u529f"),t(n)):a(new Error("\u6dfb\u52a0\u5931\u8d25")),[2]}})})})]})})},t.getBookByID=function(t,e){return n(this,void 0,Promise,function(){var o,s=this;return r(this,function(){return o={id:t.id},[2,new Promise(function(t,a){return n(s,void 0,void 0,function(){var n,s,c;return r(this,function(r){switch(r.label){case 0:return c=(s=JSON).parse,[4,this.ajax("GET",""+i.URL.DOMAIN+i.URL.AddBook,JSON.stringify(o),[{name:"Content-Type",value:"application/json"},{name:"userId",value:e}])];case 1:return(n=c.apply(s,[r.sent()]))&&"Success"==n.responseMessage?(console.log("\u6dfb\u52a0\u4e66\u7c4d\u6210\u529f"),t(n.data)):a(new Error("\u6dfb\u52a0\u5931\u8d25")),[2]}})})})]})})},t.register=function(t,e,o){return n(this,void 0,Promise,function(){var s,a=this;return r(this,function(){return s={name:t,password:e,admin:o},[2,new Promise(function(t,e){return n(a,void 0,void 0,function(){var o,n,a;return r(this,function(r){switch(r.label){case 0:return a=(n=JSON).parse,[4,this.ajax("POST",""+i.URL.DOMAIN+i.URL.Register,JSON.stringify(s),[{name:"Content-Type",value:"application/json"}])];case 1:return(o=a.apply(n,[r.sent()]))&&"Success"==o.responseMessage?(console.log("\u6ce8\u518c\u6210\u529f"),t(!0)):e(new Error("\u6ce8\u518c\u5931\u8d25")),[2]}})})})]})})},t.userList=function(t){return n(this,void 0,Promise,function(){var e,o=this;return r(this,function(){return e={currentPage:0,pageSize:9999},[2,new Promise(function(s,a){return n(o,void 0,void 0,function(){var o,n,c;return r(this,function(r){switch(r.label){case 0:return c=(n=JSON).parse,[4,this.ajax("PUT",""+i.URL.DOMAIN+i.URL.UserList,JSON.stringify(e),[{name:"Content-Type",value:"application/json"},{name:"userId",value:t}])];case 1:return(o=c.apply(n,[r.sent()]))&&"Success"==o.responseMessage?(console.log("\u6210\u529f"),s(o)):a(new Error("\u5931\u8d25")),[2]}})})})]})})},t.Fix=function(t){return n(this,void 0,Promise,function(){var e,o=this;return r(this,function(){return e=t,[2,new Promise(function(s,a){return n(o,void 0,void 0,function(){var o,n,c;return r(this,function(r){switch(r.label){case 0:return c=(n=JSON).parse,[4,this.ajax("PUT",""+i.URL.DOMAIN+i.URL.Fix,JSON.stringify(e),[{name:"Content-Type",value:"application/json"},{name:"userId",value:t.id}])];case 1:return(o=c.apply(n,[r.sent()]))&&"Success"==o.responseMessage?(console.log("\u6ce8\u518c\u6210\u529f"),s(!0)):a(new Error("\u6ce8\u518c\u5931\u8d25")),[2]}})})})]})})},t.myList=function(t){return n(this,void 0,Promise,function(){var e,o=this;return r(this,function(){return e={currentPage:0,pageSize:9999},[2,new Promise(function(s,a){return n(o,void 0,void 0,function(){var o,n,c;return r(this,function(r){switch(r.label){case 0:return c=(n=JSON).parse,[4,this.ajax("POST",""+i.URL.DOMAIN+i.URL.HistoryMy,JSON.stringify(e),[{name:"Content-Type",value:"application/json"},{name:"userId",value:t}])];case 1:return(o=c.apply(n,[r.sent()]))&&"Success"==o.responseMessage?s(o):a(new Error("\u5931\u8d25")),[2]}})})})]})})},t.orderListAll=function(t){return n(this,void 0,Promise,function(){var e,o=this;return r(this,function(){return e={currentPage:0,pageSize:9999},[2,new Promise(function(s,a){return n(o,void 0,void 0,function(){var o,n,c;return r(this,function(r){switch(r.label){case 0:return c=(n=JSON).parse,[4,this.ajax("PUT",""+i.URL.DOMAIN+i.URL.HistoryMy,JSON.stringify(e),[{name:"Content-Type",value:"application/json"},{name:"userId",value:t}])];case 1:return(o=c.apply(n,[r.sent()]))&&"Success"==o.responseMessage?s(o):a(new Error("\u5931\u8d25")),[2]}})})})]})})},t.buyBook=function(t,e,o){return n(this,void 0,Promise,function(){var s,a=this;return r(this,function(){return s={userId:t,bookId:e,total:o},[2,new Promise(function(e,o){return n(a,void 0,void 0,function(){var n,a,c;return r(this,function(r){switch(r.label){case 0:return c=(a=JSON).parse,[4,this.ajax("POST",""+i.URL.DOMAIN+i.URL.Buy,JSON.stringify(s),[{name:"Content-Type",value:"application/json"},{name:"userId",value:t}])];case 1:return(n=c.apply(a,[r.sent()]))&&"Success"==n.responseMessage?(console.log("\u8d2d\u4e70\u6210\u529f"),e(!0)):o(new Error("\u8d2d\u4e70\u5931\u8d25")),[2]}})})})]})})},t.ajax=function(t,e,o,n){return void 0===n&&(n=[]),new Promise(function(r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){var t=i.responseText;r(t)}else r(null)},i.open(t,e,!0);for(var s=0,a=n;s<a.length;s++){var c=a[s];i.setRequestHeader(c.name,c.value)}i.send(o)})},t}();o.default=s,cc._RF.pop()},{"./DataType":"DataType"}],OrderItemAll:[function(t,e,o){"use strict";cc._RF.push(e,"6780cRRm+ZM/b52JZt8Si7z","OrderItemAll");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./OrderItem"),a=cc._decorator,c=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userName=null,e}return r(e,t),e.prototype.updateUI=function(){t.prototype.updateUI&&t.prototype.updateUI.call(this),this.userName.string="\u4e0b\u5355\u7528\u6237\uff1a\u300a"+this.orderData.userName+"\u300b"},i([u(cc.Label)],e.prototype,"userName",void 0),i([c],e)}(s.default);o.default=p,cc._RF.pop()},{"./OrderItem":"OrderItem"}],OrderItem:[function(t,e,o){"use strict";cc._RF.push(e,"c831eqtYgFLDbGt1Z5MVVph","OrderItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bookName=null,e.total=null,e.ctime=null,e.amount=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.setData=function(t){this.orderData=t,this.updateUI()},e.prototype.updateUI=function(){this.bookName.string="\u4e66\u540d\uff1a\u300a"+this.orderData.bookName+"\u300b",this.total.string="\u5408\u8ba1\uff1a\u300a"+this.orderData.total+"\u300b",this.ctime.string="\u521b\u5efa\u65f6\u95f4\uff1a\u300a"+this.orderData.createTime+"\u300b",this.amount.string="\u6570\u91cf\uff1a\u300a"+this.orderData.amount+"\u300b"},i([c(cc.Label)],e.prototype,"bookName",void 0),i([c(cc.Label)],e.prototype,"total",void 0),i([c(cc.Label)],e.prototype,"ctime",void 0),i([c(cc.Label)],e.prototype,"amount",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],RotateSelf:[function(t,e,o){"use strict";cc._RF.push(e,"533d6f8vUZGOK21WTyp0OzY","RotateSelf");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){var t=this;cc.tween(this.node).sequence(cc.tween(this.node).to(2.5,{angle:-359.9}),cc.tween(this.node).call(function(){t.node.angle=0})).repeatForever().start()},i([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Shop:[function(t,e,o){"use strict";cc._RF.push(e,"ce1fcTHQ8NJWqi9K6OjqXNd","Shop");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BookDetail"),a=t("./BookItem"),c=cc._decorator,u=c.ccclass,p=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.detail=null,e.bookItem=null,e.shopData=null,e.root=null,e.uid="",e}return r(e,t),e.prototype.setRoot=function(t){this.root=t,this.detail.setRoot(t)},e.prototype.setData=function(t,e){this.uid=e,this.shopData=t,this.updateUI()},e.prototype.updateUI=function(){for(var t=this.shopData.data,e=this.content.children.reduce(function(t,e){return t[e.name]=e,t},{}),o=0;o<t.length;o++){var n=t[o],r=e[n.id];r?(r.getComponent(a.default).setData(n),delete e[r.name]):this.createNode(n.id).getComponent(a.default).setData(n)}for(var i in e)e[i].destroy()},e.prototype.createNode=function(t){var e=cc.instantiate(this.bookItem);return e.name=t,this.content.addChild(e),e},e.prototype.onShowDetial=function(t){this.root.getPageData().isTourist?this.root.showTips("\u6e38\u5ba2\u53ea\u6709\u67e5\u770b\u6743\u9650\uff0c\u8bf7\u6ce8\u518c\u767b\u5f55"):(this.detail.node.active=!0,this.detail.setData(t,this.uid))},e.prototype.onHideDetial=function(){this.detail.node.active=!1},i([p(cc.Node)],e.prototype,"content",void 0),i([p(s.default)],e.prototype,"detail",void 0),i([p(cc.Prefab)],e.prototype,"bookItem",void 0),i([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BookDetail":"BookDetail","./BookItem":"BookItem"}],Tips:[function(t,e,o){"use strict";cc._RF.push(e,"fcaecmodRxGPbpaOb3rYg5g","Tips");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return r(e,t),e.prototype.setLabel=function(t){this.label.string=t},i([c(cc.Label)],e.prototype,"label",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ToolBar:[function(t,e,o){"use strict";cc._RF.push(e,"d13e1Jl1FRPWYQ7ZOIOMGP4","ToolBar");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WinData=void 0;var c=t("./DataType"),u=t("./Net"),p=t("./OrderItemAll"),l=t("./UserItem"),f=cc._decorator,h=f.ccclass,d=f.property;o.WinData=function(){};var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnList=[],e.winList=[],e.userName=null,e.psw=null,e.contentOrder=null,e.orderItem=null,e.contentUser=null,e.userItem=null,e.topWin=null,e.root=null,e.openWin=0,e.userData=null,e.old=null,e.userList=null,e}return r(e,t),e.prototype.setRoot=function(t){this.root=t},e.prototype.setUserData=function(t){this.userData=t},e.prototype.updataShop=function(){for(var t=this.old.data,e=this.contentOrder.children.reduce(function(t,e){return t[e.name]=e,t},{}),o=0;o<t.length;o++){var n=t[o],r=e[n.id];r?(r.getComponent(p.default).setData(n),delete e[r.name]):this.createNode(n.id,this.orderItem).getComponent(p.default).setData(n)}for(var i in e)e[i].destroy()},e.prototype.createNode=function(t,e){var o=cc.instantiate(e);return o.name=t,this.contentOrder.addChild(o),o},e.prototype.adminUI=function(){this.btnList.forEach(function(t){t.active=!0})},e.prototype.userUI=function(){this.btnList.forEach(function(t,e){t.active=0==e||4==e})},e.prototype.closeBtnClick=function(){this.topWin.active=!1},e.prototype.openBtnClick=function(){this.topWin.active=!0},e.prototype.logOutBtnClick=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.userData?[4,u.default.logout(this.userData.id)]:[2];case 1:return t.sent(),this.root.setUserData(null),this.userData=null,this.root.showTips("\u9000\u51fa\u767b\u5f55\uff01"),[2]}})})},e.prototype.fixUser=function(){return s(this,void 0,void 0,function(){var t,e,o,n;return a(this,function(r){switch(r.label){case 0:return this.userData?(t=this.userName.textLabel.string,e=this.psw.textLabel.string,t.length<3?(this.root.showTips("\u7528\u6237\u540d\u8bbe\u7f6e\u592a\u77ed\uff01"),[2]):e.length<6?(this.root.showTips("\u5bc6\u7801\u8bbe\u7f6e\u592a\u77ed\uff01"),[2]):(this.root.node.emit(c.EventAct.ShowLoading),(o=this.userData).name=t,o.password=e,[4,u.default.Fix(o)])):[2];case 1:return(n=r.sent())?(this.root.showTips("\u4fee\u6539\u6210\u529f"),this.userName.textLabel.string="",this.psw.textLabel.string="",this.root.setUserData(n)):this.root.showTips("\u4fee\u6539\u5931\u8d25\uff01"),this.root.node.emit(c.EventAct.HideLoading),[2]}})})},e.prototype.updataUI=function(){for(var t=0;t<this.winList.length;t++)this.winList[t].x=this.openWin==t?-36:-4e3},e.prototype.openUserList=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.root?(this.root.node.emit(c.EventAct.ShowLoading),[4,u.default.userList(this.root.getPageData().userInfo.id)]):[2];case 1:return(t=e.sent())?(this.userList=t,this.updataUserList()):this.root.showTips("\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\uff01"),this.root.node.emit(c.EventAct.HideLoading),[2]}})})},e.prototype.updataUserList=function(){for(var t=this.userList.data,e=this.contentUser.children.reduce(function(t,e){return t[e.name]=e,t},{}),o=0;o<t.length;o++){var n=t[o],r=e[n.id];r?(r.getComponent(l.default).setData(n),delete e[r.name]):this.createNode(n.id,this.userItem).getComponent(l.default).setData(n)}for(var i in e)e[i].destroy()},e.prototype.openOrderList=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.root?(this.root.node.emit(c.EventAct.ShowLoading),[4,u.default.orderListAll(this.root.getPageData().userInfo.id)]):[2];case 1:return(t=e.sent())?(this.old=t,this.updataShop()):this.root.showTips("\u5386\u53f2\u8ba2\u5355\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\uff01"),this.root.node.emit(c.EventAct.HideLoading),[2]}})})},e.prototype.btnUserClick=function(){this.openWin=0,this.updataUI()},e.prototype.btnUserListClick=function(){this.openWin=1,this.updataUI()},e.prototype.btnOrderListClcik=function(){this.openWin=3,this.updataUI(),this.openOrderList()},e.prototype.btnShopListClick=function(){},i([d([cc.Node])],e.prototype,"btnList",void 0),i([d([cc.Node])],e.prototype,"winList",void 0),i([d(cc.EditBox)],e.prototype,"userName",void 0),i([d(cc.EditBox)],e.prototype,"psw",void 0),i([d(cc.Node)],e.prototype,"contentOrder",void 0),i([d(cc.Prefab)],e.prototype,"orderItem",void 0),i([d(cc.Node)],e.prototype,"contentUser",void 0),i([d(cc.Prefab)],e.prototype,"userItem",void 0),i([d(cc.Node)],e.prototype,"topWin",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"./DataType":"DataType","./Net":"Net","./OrderItemAll":"OrderItemAll","./UserItem":"UserItem"}],UserItem:[function(t,e,o){"use strict";cc._RF.push(e,"38c1fwOmE1OzoQ6FiISfb4H","UserItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userName=null,e.role=null,e.time=null,e.userData=null,e}return r(e,t),e.prototype.setData=function(t){this.userData=t,this.userName.string="\u7528\u6237\u540d\uff1a"+t.name,this.role.string="\u8eab\u4efd\uff1a"+(t.admin?"\u7ba1\u7406\u5458":"\u666e\u901a\u7528\u6237"),this.time.string="\u6ce8\u518c\u65f6\u95f4\uff1a"+t.creationTime},i([c(cc.Label)],e.prototype,"userName",void 0),i([c(cc.Label)],e.prototype,"role",void 0),i([c(cc.Label)],e.prototype,"time",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}]},{},["BookDetail","BookItem","BottomTool","DataType","Helloworld","HomePage","Login","Net","OrderItem","OrderItemAll","RotateSelf","Shop","Tips","ToolBar","UserItem"]);
//# sourceMappingURL=index.js.map
